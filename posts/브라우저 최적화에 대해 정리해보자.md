---
title: 브라우저 최적화에 대해 정리해 보자
---
## 반복문으로 dom에 엘리먼트를 추가할 경우 reflow가 매번 발생할까?

예전에 jquery를 사용하던 시절에는 이런 브라우저 최적화에 대한 이슈를 피해가기 위해 `DocumentFragment`를 사용하여 fragment가 추가되기 전까지 reflow 없이 한 번에 처리되게 하거나 element를 dom api로 생성하는 경우(`createElement('div')`와 같은) append 시점까지 reflow를 생성하지 않기 때문에 이와 같은 방법으로 dom을 직접 조작했다. react를 사용하는 현재 상황에서는 이런 고려는 react에 virtual dom이 알아서 해주겠거니 신경쓰지 않고 있다.

```js
const list = document.querySelector("#list");
const fruits = ["Apple", "Orange", "Banana", "Melon"];

const fragment = new DocumentFragment();

fruits.forEach((fruit) => {
  const li = document.createElement("li");
  li.textContent = fruit;
  list.appendChild(li);
});
```
다음과 같은 코드를 chrome devtool에서 performance로 검사해보면 rendering이 매번 일어나지 않는다. frame 변화에서도 한번의 rendering이 발생하는 것으로 보인다.
하지만 다음과 같은 코드는 어떻게 될까?
```
for (let i = 0; i < 1000; i++) { const child = document.createElement('div'); child.textContent = `Item ${i}`; container.appendChild(child); console.log(container.offsetHeight); // 강제 리플로우 }
```